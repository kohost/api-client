/* @ts-nocheck */
/* This file is automatically generated. Do not modify it manually. */

import { Entity } from "./entity";
import { validatePolicy as validate } from "../validate";

/**
 * @typedef {Object} PolicyData A policy is a set of permissions that can be applied to a user to limit their access to resources.
 * @property {string} id - Identifier of the object.
 * @property {"policy"} type - Default: "policy"
 * @property {"user"} discriminator
 * @property {string} name
 * @property {string} [description]
 * @property {string} organizationId
 * @property {string} propertyId
 * @property {{entities: string[], effect: ("Allow"|"Deny")}[]} permissions
 * @property {(string|object)} [createdAt]
 * @property {(string|object)} [updatedAt]
 * @property {(string|object)} [deletedAt]
 */

/**
 * A policy is a set of permissions that can be applied to a user to limit their access to resources.
 * @class Policy
 * @extends {Entity}
 */
export class Policy extends Entity {
  /**
   * @constructor
   * @param {PolicyData} data - The data to initialize the Policy with
   */
  constructor(data) {
    super(data);
    this.id = data.id;
    this.type = data.type;
    this.discriminator = data.discriminator;
    this.name = data.name;
    if (data.description !== undefined) this.description = data.description;
    this.organizationId = data.organizationId;
    this.propertyId = data.propertyId;
    this.permissions = data.permissions;
    if (data.createdAt !== undefined) this.createdAt = data.createdAt;
    if (data.updatedAt !== undefined) this.updatedAt = data.updatedAt;
    if (data.deletedAt !== undefined) this.deletedAt = data.deletedAt;
  }
}

Object.defineProperty(Policy.prototype, "schema", {
  value: {
    $schema: "http://json-schema.org/draft-07/schema",
    $id: "policy.json",
    title: "Policy",
    description:
      "A policy is a set of permissions that can be applied to a user to limit their access to resources.",
    type: "object",
    required: [
      "id",
      "name",
      "type",
      "organizationId",
      "propertyId",
      "permissions",
      "discriminator",
    ],
    properties: {
      id: { $ref: "definitions.json#/definitions/id" },
      type: { type: "string", default: "policy", enum: ["policy"] },
      discriminator: { type: "string", enum: ["user"] },
      name: { type: "string", minLength: 1 },
      description: { type: "string" },
      organizationId: { type: "string" },
      propertyId: { type: "string" },
      permissions: {
        type: "array",
        items: {
          type: "object",
          required: ["entities", "effect"],
          properties: {
            entities: {
              type: "array",
              items: { type: "string", pattern: "^[^:]+(:.+)+$" },
            },
            effect: { type: "string", enum: ["Allow", "Deny"] },
          },
        },
      },
      createdAt: { $ref: "definitions.json#/definitions/date" },
      updatedAt: { $ref: "definitions.json#/definitions/date" },
      deletedAt: { $ref: "definitions.json#/definitions/date" },
    },
  },
});

Object.defineProperty(Policy.prototype, "validator", {
  get: function () {
    return validate;
  },
});
