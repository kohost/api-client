/* @ts-nocheck */
/* This file is automatically generated. Do not modify it manually. */

import { Entity } from "./entity";
import { validateUser as validate } from "../validate";

/**
 * @typedef {Object} UserData
 * @property {string} id - Identifier of the object.
 * @property {string} [type] - Default: "user"
 * @property {string} firstName
 * @property {string} lastName
 * @property {(string|null)} [phone]
 * @property {boolean} [phoneVerified]
 * @property {(string|null)} [email]
 * @property {boolean} [emailVerified]
 * @property {(string|null)} [whatsapp]
 * @property {boolean} [whatsappVerified]
 * @property {{id?: string, line1?: string, line2?: string, line3?: string, city?: string, state?: string, postalCode?: string, countryCode?: string}} [address]
 * @property {string} [secretKey]
 * @property {{id?: string, type: "mediaFile", name?: string, fileHash?: string, category?: string, mimeType?: ("image/*"|"image/jpeg"|"image/png"|"image/gif"|"image/webp"|"image/avif"|"image/svg+xml"|"application/pdf"), data?: string, url?: string, width?: number, height?: number, size?: number, uploadUrl?: string, uploadUrlExpires?: (string|object), createdBy?: string, systemId?: string, createdAt?: (string|object), updatedAt?: (string|object), deletedAt?: (string|object)}} [photo] - Any media file
 * @property {string} [jobTitle]
 * @property {string} [dob]
 * @property {("male"|"female")} [gender]
 * @property {string} [nationality]
 * @property {{organizationId: string, propertyId: string, role: ("Guest"|"User"|"Agent"|"Manager"|"Maintenance"|"Administrator"|"SuperAdmin"), timeTrackingEnabled?: boolean, department?: string, policyIds?: string[], policies?: {id: string, type: "policy", discriminator: "user", name: string, description?: string, organizationId: string, propertyId: string, permissions: {entities: string[], effect: ("Allow"|"Deny")}[], createdAt?: (string|object), updatedAt?: (string|object), deletedAt?: (string|object)}[]}[]} [permissions] - Default: []
 * @property {{organizationId: string, propertyId: string, notifications?: {discriminator: ("observerTicketCreated"|"observerTicketResolved"), enabled: boolean}[]}[]} [preferences]
 * @property {string[]} [notes]
 * @property {{id?: string, type: "mediaFile", name?: string, fileHash?: string, category?: string, mimeType?: ("image/*"|"image/jpeg"|"image/png"|"image/gif"|"image/webp"|"image/avif"|"image/svg+xml"|"application/pdf"), data?: string, url?: string, width?: number, height?: number, size?: number, uploadUrl?: string, uploadUrlExpires?: (string|object), createdBy?: string, systemId?: string, createdAt?: (string|object), updatedAt?: (string|object), deletedAt?: (string|object)}[]} [files]
 * @property {{id?: string, type: ("driversLicense"|"passport"|"identityCard"|"visa"), number?: string, maskedNumber?: string, encryptedNumber?: string, issued?: (string|object), expires?: (string|object|null), verified?: boolean, matched?: boolean, firstName?: string, lastName?: string, issuingCountry?: string, issuingState?: string, systemId?: string}[]} [identifications]
 * @property {{id?: string, type: ("amex"|"visa"|"masterCard"|"maestro"|"discover"|"diners"|"jcb"|"applePay"|"alipay"|"chinaUnionPay"|"vpay"), enabled?: boolean, storageData?: (string|null), maskedNumber: string, issued?: (string|null), expires: string, systemId?: string}[]} [payments]
 * @property {{accuracy: (number|null), latitude: (number|null), longitude: (number|null), timestamp: (number|null)}} [location]
 * @property {{id?: string, driver?: ("adlink"|"aws-kinesis"|"bacnet"|"benq"|"butler"|"comelit"|"crestron"|"dell"|"digital-watchdog"|"distech"|"dmp"|"doorbird"|"dormakaba"|"dsc"|"ecobee"|"epson"|"geovision-rs"|"geovision-as-manager"|"honeywell-vista"|"igor"|"inncom"|"isapi"|"kohost-k7"|"kohost"|"lg"|"lg-webos"|"lapi"|"lirc"|"mews"|"mht"|"newline"|"paxton"|"pelican-wireless"|"power-shades"|"rachio"|"rebrandly"|"relay"|"rtsp"|"salto"|"salto-irn"|"samsung"|"se"|"sendgrid"|"smartboard"|"sonifi"|"stay-n-touch"|"storable"|"twilio"|"unifi"|"valcom"|"veracross"|"vivotek"|"vizio"|"wisenet"|"cloudflare-images"|"cloudflare-stream"|"insperia-privacy"), primaryGuest?: string, type: "reservation", sharedGuests?: string[], spaceCategory?: string, space?: (string|null), previousSpace?: (string|null), status: ("reserved"|"checkedIn"|"checkedOut"|"cancelled"|"noShow"|"enquired"|"requested"|"optional"), mobileCheckInSpaceCategoryChanged?: boolean, mobileCheckInSpaceChanged?: boolean, mobileCheckInStatus?: ("ready"|"blocked"|"preArrivalStepsRequired"|"spaceNotAssigned"|"spaceNotReady"|"checkInTimeNotStarted"), mobileCheckInStatusMessage?: string, confirmationNumber?: string, expectedCheckInDateTime?: (string|object), checkInDateTime: (string|object), checkOutDateTime: (string|object), adultCount?: number, childCount?: number, spaceCategoryAvailabilites?: {id?: string, price?: number, unit?: ("night"|"stay"|"hour"), isUpgrade?: boolean}[], revenue?: {id?: string, name?: string, date?: string, price?: number, tax?: (number|null)}[], rateSuppressed?: boolean, payment?: string, company?: string, travelAgent?: string, systemId?: string, metadata?: {}, createdAt?: (string|object), updatedAt?: (string|object), deletedAt?: (string|object)}[]} [reservations]
 * @property {string} [spaceName]
 * @property {{id?: string, name?: string, date?: string, price?: number, tax?: (number|null)}[]} [revenue]
 * @property {{systemId: string, propertyId: string, driver: string}[]} [systems] - Default: []
 * @property {(string|object)} [createdAt]
 * @property {(string|object)} [updatedAt]
 * @property {(string|object)} [deletedAt]
 */

/**
 *
 * @class User
 * @extends {Entity}
 */
export class User extends Entity {
  /**
   * @constructor
   * @param {UserData} data - The data to initialize the User with
   */
  constructor(data) {
    super(data);
    this.id = data.id;
    if (data.type !== undefined) this.type = data.type;
    this.firstName = data.firstName;
    this.lastName = data.lastName;
    if (data.phone !== undefined) this.phone = data.phone;
    if (data.phoneVerified !== undefined)
      this.phoneVerified = data.phoneVerified;
    if (data.email !== undefined) this.email = data.email;
    if (data.emailVerified !== undefined)
      this.emailVerified = data.emailVerified;
    if (data.whatsapp !== undefined) this.whatsapp = data.whatsapp;
    if (data.whatsappVerified !== undefined)
      this.whatsappVerified = data.whatsappVerified;
    if (data.address !== undefined) this.address = data.address;
    if (data.secretKey !== undefined) this.secretKey = data.secretKey;
    if (data.photo !== undefined) this.photo = data.photo;
    if (data.jobTitle !== undefined) this.jobTitle = data.jobTitle;
    if (data.dob !== undefined) this.dob = data.dob;
    if (data.gender !== undefined) this.gender = data.gender;
    if (data.nationality !== undefined) this.nationality = data.nationality;
    if (data.permissions !== undefined) this.permissions = data.permissions;
    if (data.preferences !== undefined) this.preferences = data.preferences;
    if (data.notes !== undefined) this.notes = data.notes;
    if (data.files !== undefined) this.files = data.files;
    if (data.identifications !== undefined)
      this.identifications = data.identifications;
    if (data.payments !== undefined) this.payments = data.payments;
    if (data.location !== undefined) this.location = data.location;
    if (data.reservations !== undefined) this.reservations = data.reservations;
    if (data.spaceName !== undefined) this.spaceName = data.spaceName;
    if (data.revenue !== undefined) this.revenue = data.revenue;
    if (data.systems !== undefined) this.systems = data.systems;
    if (data.createdAt !== undefined) this.createdAt = data.createdAt;
    if (data.updatedAt !== undefined) this.updatedAt = data.updatedAt;
    if (data.deletedAt !== undefined) this.deletedAt = data.deletedAt;
  }

  get fullName() {
    return `${this.firstName} ${this.lastName}`;
  }
  get roles() {
    const roles = new Set();
    if (this.permissions) {
      for (const permission of this.permissions) {
        roles.add(permission.role);
      }
    }
    return Array.from(roles);
  }
  get isSuperAdmin() {
    return this.roles.includes("SuperAdmin");
  }
  get isAdmin() {
    return this.roles.includes("Admin") || this.roles.includes("Administrator");
  }
  get isManager() {
    return this.roles.includes("Manager");
  }
  get isUser() {
    return this.roles.includes("User");
  }
}

Object.defineProperty(User.prototype, "schema", {
  value: {
    $schema: "http://json-schema.org/draft-07/schema",
    $id: "user.json",
    title: "User",
    type: "object",
    required: ["id", "firstName", "lastName"],
    properties: {
      id: { $ref: "definitions.json#/definitions/id" },
      type: { type: "string", default: "user" },
      firstName: { type: "string" },
      lastName: { type: "string" },
      phone: { type: ["string", "null"], pattern: "^\\+[0-9]{1,14}$" },
      phoneVerified: { type: "boolean" },
      email: { type: ["string", "null"], format: "email" },
      emailVerified: { type: "boolean" },
      whatsapp: { type: ["string", "null"], pattern: "^\\+[0-9]{1,14}$" },
      whatsappVerified: { type: "boolean" },
      address: { $ref: "definitions.json#/definitions/address" },
      secretKey: { type: "string" },
      photo: { $ref: "mediaFile.json#" },
      jobTitle: { type: "string" },
      dob: { type: "string" },
      gender: { type: "string", enum: ["male", "female"] },
      nationality: { type: "string", minLength: 2, maxLength: 2 },
      permissions: {
        type: "array",
        default: [],
        items: {
          type: "object",
          required: ["organizationId", "propertyId", "role"],
          properties: {
            organizationId: {
              type: "string",
              description:
                "The ID of the organization the permission is applies to.",
            },
            propertyId: {
              type: "string",
              description:
                "The ID of the property the permission is applies to.",
            },
            role: {
              type: "string",
              enum: [
                "Guest",
                "User",
                "Agent",
                "Manager",
                "Maintenance",
                "Administrator",
                "SuperAdmin",
              ],
            },
            timeTrackingEnabled: {
              type: "boolean",
              description: "Whether time tracking is enabled for this role.",
            },
            department: {
              type: "string",
              description: "The department the user belongs to.",
            },
            policyIds: {
              type: "array",
              items: {
                type: "string",
                description: "ID of a policy that is applied to this role.",
              },
            },
            policies: {
              type: "array",
              items: {
                description:
                  "A policy object populated from the policyIds array.",
                $ref: "policy.json",
              },
            },
          },
          additionalProperties: false,
        },
      },
      preferences: {
        type: "array",
        items: {
          type: "object",
          additionalProperties: false,
          required: ["organizationId", "propertyId"],
          properties: {
            organizationId: { type: "string" },
            propertyId: { type: "string" },
            notifications: {
              type: "array",
              items: {
                type: "object",
                additionalProperties: false,
                required: ["discriminator", "enabled"],
                properties: {
                  discriminator: {
                    type: "string",
                    enum: ["observerTicketCreated", "observerTicketResolved"],
                  },
                  enabled: { type: "boolean" },
                },
              },
            },
          },
        },
      },
      notes: { type: "array", items: { type: "string" } },
      files: { type: "array", items: { $ref: "mediaFile.json#" } },
      identifications: {
        type: "array",
        items: { $ref: "identification.json#" },
      },
      payments: { type: "array", items: { $ref: "payment.json#" } },
      location: {
        type: "object",
        required: ["accuracy", "latitude", "longitude", "timestamp"],
        additionalProperties: false,
        properties: {
          accuracy: { type: ["number", "null"] },
          latitude: { type: ["number", "null"] },
          longitude: { type: ["number", "null"] },
          timestamp: { type: ["number", "null"] },
        },
      },
      reservations: { type: "array", items: { $ref: "reservation.json" } },
      spaceName: { type: "string" },
      revenue: { $ref: "definitions.json#/definitions/revenue" },
      systems: {
        type: "array",
        default: [],
        items: {
          type: "object",
          properties: {
            systemId: { type: "string" },
            propertyId: { type: "string" },
            driver: { type: "string" },
          },
          required: ["systemId", "propertyId", "driver"],
          additionalProperties: false,
        },
      },
      createdAt: { $ref: "definitions.json#/definitions/createdAt" },
      updatedAt: { $ref: "definitions.json#/definitions/updatedAt" },
      deletedAt: { $ref: "definitions.json#/definitions/date" },
    },
  },
});

Object.defineProperty(User.prototype, "validator", {
  get: function () {
    return validate;
  },
});
